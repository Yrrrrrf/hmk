@host = http://127.0.0.1:8080
@contentType = application/json

# ==========================================
# 1. GET ALL USERS
# ==========================================
GET {{host}}/api/users/all
Accept: {{contentType}}

###

# ==========================================
# 2. SAVE NEW USER
# ==========================================
# @name createUser
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "vscode_user",
    "password": "mySecretPassword123",
    "email": "vscode@test.com"
}

###

# ==========================================
# 3. DELETE USER
# ==========================================
# ⚠️ MANUAL STEP: 
# VS Code's basic REST Client cannot auto-save variables from responses like IntelliJ.
# You must copy the 'id' from the Response of Step 2 
# and replace '1' below with that number.
DELETE {{host}}/api/users/1

###

# ==========================================
# 4. TEST LOGIN (Form Data)
# ==========================================
POST {{host}}/login
Content-Type: application/x-www-form-urlencoded

login=player1&password=pass1

###

# ==========================================
# 5. TEST VALIDATION: Empty Username
# ==========================================
# Expecting: 400 Bad Request (Validation Error)
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "",
    "password": "123"
}

###

# ==========================================
# 6. TEST VALIDATION: Short Password
# ==========================================
# Expecting: 400 Bad Request (Password min 3 chars)
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "validUser",
    "password": "12"
}

###

# ==========================================
# 7. TEST SQL INJECTION ATTEMPT (Sanity Check)
# ==========================================
# JPA should handle this safely and treat it as a literal string
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "hacker' OR '1'='1",
    "password": "password"
}
