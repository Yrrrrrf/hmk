@host = http://127.0.0.1:8080
@contentType = application/json

# ==========================================
# 1. HAPPY PATH: GET ALL USERS
# ==========================================
GET {{host}}/api/users/all
Accept: {{contentType}}

###

# ==========================================
# 2. HAPPY PATH: SAVE NEW USER
# ==========================================
# @name createUser
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "vscode_user",
    "password": "mySecretPassword123",
    "email": "vscode@test.com"
}

###

# ==========================================
# 3. TEST DE VALIDACIÓN: Usuario Vacío
# ==========================================
# Esperamos: 400 Bad Request o Error de Validación
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "",
    "password": "123"
}

###

# ==========================================
# 4. TEST DE VALIDACIÓN: Password Corta
# ==========================================
# Esperamos: 400 Bad Request (Password min 3 chars)
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "validUser",
    "password": "12"
}

###

# ==========================================
# 5. TEST DE SEGURIDAD: SQL Injection Básico
# ==========================================
# JPA debería manejar esto y guardar el usuario literalmente,
# NO ejecutar el SQL malicioso.
POST {{host}}/api/users/save
Content-Type: {{contentType}}

{
    "login": "hacker' OR '1'='1",
    "password": "password"
}

###

# ==========================================
# 6. SCORE: Registrar Puntaje
# ==========================================
# Nota: Esto requiere que tengas una sesión válida o
# que modifiques el Controller para aceptar userId en el body por ahora.
POST {{host}}/api/scores
Content-Type: {{contentType}}

{
    "gameId": 1,
    "score": 5
}

###

# ==========================================
# 7. SCORE: Ver Leaderboard
# ==========================================
GET {{host}}/api/scores/top?gameId=1
Accept: {{contentType}}

###

# ==========================================
# 8. HAPPY PATH: DELETE USER
# ==========================================
# ⚠️ PASO MANUAL:
# Reemplaza el '1' con el ID real que quieras borrar.
DELETE {{host}}/api/users/1